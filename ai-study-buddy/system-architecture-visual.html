<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Study Buddy - System Architecture</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            margin: 0;
            padding: 2rem;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 2rem 3rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        h1, h2, h3 {
            color: #2c3e50;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 0.5rem;
            margin-top: 2rem;
        }
        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 2rem;
        }
        h2 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }
        h3 {
            font-size: 1.3rem;
            border-bottom: 1px solid #eaeaea;
            margin-bottom: 1rem;
        }
        .mermaid {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background-color: #fdfdfd;
            border: 1px solid #eee;
            border-radius: 8px;
            text-align: center;
        }
        ul {
            padding-left: 20px;
            margin-bottom: 2rem;
        }
        li {
            margin-bottom: 0.75rem;
        }
        code {
            background-color: #e8e8e8;
            padding: 0.2em 0.4em;
            border-radius: 4px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
            font-size: 0.9em;
        }
        .instructions {
            background-color: #e6f7ff;
            border: 1px solid #91d5ff;
            border-radius: 8px;
            padding: 1rem 1.5rem;
            margin-bottom: 2rem;
        }
        @media print {
            body {
                padding: 0;
            }
            .container {
                box-shadow: none;
                border-radius: 0;
                padding: 1rem;
            }
            .instructions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>AI Study Buddy: System Architecture</h1>
        
        <div class="instructions">
            <p><strong>How to create your PDF:</strong></p>
            <ol>
                <li>Press <strong>Ctrl+P</strong> (or <strong>Cmd+P</strong> on Mac) to open the print dialog.</li>
                <li>Change the "Destination" to <strong>"Save as PDF"</strong>.</li>
                <li>Click <strong>"Save"</strong>.</li>
            </ol>
        </div>

        <h2>1. Architectural Overview</h2>
        <p>
            The AI Study Buddy is designed as a <strong>serverless, client-centric web application</strong>. This architectural choice means that all business logic, state management, and API interactions are handled directly within the user's web browser. This model was selected to maximize user privacy (as sensitive study data is not stored on a remote server), eliminate backend infrastructure costs, and simplify deployment.
        </p>
        <ul>
            <li><strong>Frontend Stack:</strong> A modern single-page application (SPA) built with React and TypeScript, ensuring a type-safe, component-based, and maintainable codebase.</li>
            <li><strong>AI Services:</strong> All intelligent features are powered by direct, secure calls from the client to the Google Gemini API.</li>
            <li><strong>Browser APIs:</strong> The application leverages powerful native browser capabilities (Web Speech API, LocalStorage, Intersection Observer) for enhanced performance and features without external dependencies.</li>
            <li><strong>Data Persistence:</strong> All user-specific data, including chat history, study plans, flashcard decks, and gamification stats, is persisted exclusively in the browser's <code>LocalStorage</code>.</li>
        </ul>

        <h2>2. System Architecture Diagram</h2>
        <div class="mermaid">
            graph TD
                subgraph User's Browser
                    UI[üíª User Interface <br/>(React Components)]
                    LOGIC[‚öôÔ∏è Application Logic <br/>(Hooks & Services)]
                    STORAGE[üíæ LocalStorage]
                end

                subgraph External Services
                    GEMINI[üß† Google Gemini API]
                end
                
                subgraph Browser-Native APIs
                    SPEECH[üéôÔ∏è Web Speech API]
                    OBSERVER[üëÄ Intersection Observer]
                end

                UI -- User Input --> LOGIC
                LOGIC -- Manages State --> STORAGE
                LOGIC -- Reads State --> STORAGE
                LOGIC -- Makes API Calls --> GEMINI
                GEMINI -- Streams AI Response --> LOGIC
                LOGIC -- Updates UI State --> UI
                
                UI -- Voice Input / TTS --> SPEECH
                SPEECH -- Transcript / Audio Output --> LOGIC
                
                UI -- Triggers Animation --> OBSERVER
                OBSERVER -- Visibility State --> LOGIC
        </div>

        <h2>3. Component Breakdown</h2>
        
        <h3>User Interface (React Components)</h3>
        <p>This is the visual layer of the application that the user directly interacts with. It is built as a tree of modular React components, each responsible for a specific piece of the UI (e.g., `ChatInterface`, `FlashcardGenerator`, `Sidebar`). Its primary roles are to render the application state and capture all user inputs (clicks, text entry, file uploads).</p>

        <h3>Application Logic (Hooks & Services)</h3>
        <p>This is the "brain" of the client-side application. It orchestrates the flow of data and manages the application's state. This layer includes:</p>
        <ul>
            <li><strong>React Hooks (e.g., `useState`, `useEffect`, custom hooks):</strong> Used to manage the lifecycle and state within components.</li>
            <li><strong>Service Modules (e.g., `geminiService.ts`):</strong> A dedicated service that encapsulates all logic for communicating with the Google Gemini API. This isolates external API calls from the UI components, making the code cleaner and easier to maintain.</li>
        </ul>

        <h3>LocalStorage</h3>
        <p>This acts as the on-device database for the application. It's a key-value store built into the web browser. We use it to persist all user-generated data, such as chat history, quiz results, study plans, and dashboard statistics. This allows the user to close the browser and resume their session later without losing their progress.</p>

        <h3>Google Gemini API</h3>
        <p>This is the only external, cloud-based service the application depends on. It provides the core artificial intelligence capabilities. All complex tasks, including natural language understanding, text generation, RAG, image analysis, and structured JSON creation, are offloaded to various models within the Gemini suite. The application communicates with this API over HTTPS.</p>

        <h3>Browser-Native APIs</h3>
        <p>These are powerful APIs provided directly by the web browser, allowing for rich functionality without external libraries or services.</p>
        <ul>
            <li><strong>Web Speech API:</strong> Used for both speech-to-text (voice input) and text-to-speech (reading AI responses aloud). All processing happens on-device, ensuring privacy.</li>
            <li><strong>Intersection Observer:</strong> A performant API used by the landing page to detect when elements scroll into view, triggering animations without causing performance issues.</li>
        </ul>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>